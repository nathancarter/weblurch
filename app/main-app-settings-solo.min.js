(function(){window.groupMenuItems.appsettings={text:"Application settings...",context:"file",onclick:function(){return tinymce.activeEditor.Settings.application.showUI()}},window.groupMenuItems.docsettings={text:"Document settings...",context:"file",onclick:function(){return tinymce.activeEditor.Settings.document.showUI()}},window.afterEditorReadyArray.push(function(e){var t,n;return t=e.Settings.addCategory("application"),t.get("filesystem")||t.set("filesystem","dropbox"),t.setup=function(n){var i,a,o;return i=t.get("filesystem"),n.innerHTML=[e.Settings.UI.heading("Wiki Login"),e.Settings.UI.info('Entering a username and password here does NOT create an account on the wiki.  You must already have one.  If you do not, first visit <a href="/wiki/index.php" target="_blank" style="color: blue;">the wiki</a>, create an account, then return here.'),e.Settings.UI.text("Username","wiki_username",null!=(a=t.get("wiki_username"))?a:""),e.Settings.UI.password("Password","wiki_password",null!=(o=t.get("wiki_password"))?o:""),e.Settings.UI.heading("Open/Save Filesystem"),e.Settings.UI.radioButton("Dropbox (cloud storage, requires account)","filesystem","dropbox"===i,"filesystem_dropbox"),e.Settings.UI.radioButton("Local Storage (kept permanently, in browser only)","filesystem","local storage"===i,"filesystem_local_storage")].join("\n")},t.teardown=function(e){var n;return n=function(t){return e.ownerDocument.getElementById(t)},t.set("wiki_username",n("wiki_username").value),t.set("wiki_password",n("wiki_password").value),t.setFilesystem(n("filesystem_dropbox").checked?"dropbox":"local storage")},t.setFilesystem=function(n){return t.set("filesystem",n),"dropbox"===n?(e.LoadSave.installOpenHandler(e.Dropbox.openHandler),e.LoadSave.installSaveHandler(e.Dropbox.saveHandler),e.LoadSave.installManageFilesHandler(e.Dropbox.manageFilesHandler)):(e.LoadSave.installOpenHandler(),e.LoadSave.installSaveHandler(),e.LoadSave.installManageFilesHandler())},t.setFilesystem(t.get("filesystem")),n=e.Settings.addCategory("document"),n.metadata={},n.get=function(e){var t;return null!=(t=n.metadata)?t[e]:void 0},n.set=function(e,t){return(null!=n.metadata?n.metadata:n.metadata={})[e]=t},n.setup=function(t){var i,a;return t.innerHTML=[e.Settings.UI.heading("Dependencies"),"<div id='dependenciesSection'></div>",e.Settings.UI.heading("Google Drive"),e.Settings.UI.info("(Google Drive integration not yet complete.<br>Check back later for progress on this feature.)"),e.Settings.UI.text("Save to Drive with this title","doc_title",null!=(i=n.get("doc_title"))?i:"Untitled"),e.Settings.UI.heading("Wiki Publishing"),e.Settings.UI.text("Publish to wiki under this title","wiki_title",null!=(a=n.get("wiki_title"))?a:"")].join("\n"),e.Dependencies.installUI(t.ownerDocument.getElementById("dependenciesSection"))},n.teardown=function(e){var t;return t=function(t){return e.ownerDocument.getElementById(t)},n.set("wiki_title",t("wiki_title").value)},e.LoadSave.saveMetaData=function(t){var i,a,o;return null==t&&(t=!0),null==n.metadata&&(n.metadata={}),a=Object.keys(null!=(o=e.LoadSave.validationsPending)?o:{}).length,a>0?(n.metadata.exports={error:"This document cannot export its dependencies, because at the time it was saved, "+a+" "+(a>1?"groups were":"group was")+" still waiting for validation to finish running."},t&&e.Dialogs.alert({title:"Dependency information not saved",message:"Because validation was not complete, the saved version of this document will not be usable by any dependency.  To fix this problem, allow validation to finish running, then save."})):n.metadata.exports=function(){var e,t,n,a;for(n=window.labeledTopLevelExpressions(),a=[],e=0,t=n.length;t>e;e++)i=n[e],a.push(i.completeForm().encode());return a}(),n.metadata.dependencies=e.Dependencies["export"](),n.metadata},e.LoadSave.loadMetaData=function(t){var i,a;return n.metadata=t,e.Dependencies["import"](null!=(i=null!=(a=n.metadata)?a.dependencies:void 0)?i:[])},e.LoadSave.waitForMetaData=function(t,n){var i,a;return null==n&&(n=0),a=(new Date).getTime(),setTimeout(i=function(){var o,s;return o=e.LoadSave.saveMetaData(!1),null!=o&&null==(null!=(s=o.exports)?s.error:void 0)||(new Date).getTime()-a>n&&n>0?t(o):setTimeout(i,100)},100)}})}).call(this);
//# sourceMappingURL=main-app-settings-solo.min.js.map