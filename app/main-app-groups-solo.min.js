(function(){var t,e=[].slice;window.groupTypes=[{name:"expression",text:"Expression",imageHTML:'<font color="#996666">[ ]</font>',openImageHTML:'<font color="#996666">[</font>',closeImageHTML:'<font color="#996666">]</font>',tooltip:"Make the selected text an expression",color:"#996666",shortcut:"Ctrl+[",LaTeXshortcut:"\\[",connectionRequest:function(t,e){var n;return n=function(t,e){var o,r,i,c,a;if(t===e)return!0;for(a=t.connectionsOut(),i=0,c=a.length;c>i;i++)if(o=a[i],r=tinymce.activeEditor.Groups[o[1]],n(r,e))return!0;return!1},n(e,t)?t.plugin.editor.Dialogs.alert({title:"Cannot connect expressions",message:"Forming that connection would create a cycle of connections among expressions, which is not permitted."}):tinymce.activeEditor.undoManager.transact(function(){return t.connect(e),t.get("key")||t.set("key","label"),t.get("keyposition")?void 0:t.set("keyposition","arrow")})},connections:function(t){var n,o,r,i,c,a,u,s;for(r=t.connectionsOut(),o=t.connectionsIn(),s=e.call(o).concat(e.call(r)),a=0,u=s.length;u>a;a++)n=s[a],i=tinymce.activeEditor.Groups[n[0]],"arrow"===i.get("keyposition")&&(n[2]=i.get("key")),"premise"===i.get("key")&&(n[3]=function(t){return t.setLineDash([3,3])});return e.call(r).concat(e.call(o),e.call(function(){var t,e,n;for(n=[],t=0,e=r.length;e>t;t++)c=r[t],n.push(c[1]);return n}()),e.call(function(){var t,e,n;for(n=[],t=0,e=o.length;e>t;t++)c=o[t],n.push(c[0]);return n}()))},tagContents:function(t){return"source"===t.get("keyposition")?t.get("key"):null},tagMenuItems:function(e){var n;return n=[],e.connectionsOut().length>0&&"source"===e.get("keyposition")&&(n.push({text:'Move "'+e.get("key")+'" onto arrow',onclick:function(){return tinymce.activeEditor.undoManager.transact(function(){return e.set("keyposition","arrow")})}}),n.push(t(e))),n},contextMenuItems:function(e){var n,o,r,i,c,a,u,s,l,g,h,f,d,p,y,k;if(s=[],i=e.connectionsOut(),c=e.get("key"),i.length>0&&("arrow"===e.get("keyposition")&&s.push({text:'Move "'+e.get("key")+'" onto attribute',onclick:function(){return tinymce.activeEditor.undoManager.transact(function(){return e.set("keyposition","source")})}}),s.push(t(e))),i.length>0&&"premise"!==c){for(f=function(){var t,e,n;for(n=[],t=0,e=i.length;e>t;t++)r=i[t],n.push(tinymce.activeEditor.Groups[r[1]]);return n}(),n=!0,d=0,y=f.length;y>d;d++)if(h=f[d],h.attributeGroupsForKey(c).length>1){n=!1;break}if(n)s.push({text:"Hide this attribute",onclick:function(){var t,n,o;return t=function(){return tinymce.activeEditor.undoManager.transact(function(){var t,n,o,r,i;for(i=[],t=o=0,r=f.length;r>o;t=++o)h=f[t],n=t===f.length-1,h.embedAttribute(c,n),i.push(n?void 0:e.connect(f[t+1]));return i})},o="",f.length>1&&(o+="You are hiding this attribute in "+f.length+" expressions.  "),n=e.attributionAncestry(!0).length-e.attributionAncestry(!1).length,n>0&&(o+="There are "+n+" premise connections that will be broken if you hide that attribute.  "),o.length>0?tinymce.activeEditor.Dialogs.confirm({title:"Warning",message:""+o+"Continue anyway?",okCallback:t}):t()}});else if(1===f.length){for(h=f[0],g=h.attributeGroupsForKey(c),o=!1,p=0,k=g.length;k>p;p++)if(l=g[p],l.connectionsOut().length>1){o=!0;break}o||s.push({text:"Hide this attribute",onclick:function(){var t,n,o,r,i;for(t=function(){return tinymce.activeEditor.undoManager.transact(function(){var t,n,o,r,i;for(i=[],t=o=0,r=f.length;r>o;t=++o)h=f[t],n=t===f.length-1,h.embedAttribute(c,n),i.push(n?void 0:e.connect(f[t+1]));return i})},o="You are about to hide not one attribute, but "+g.length+", all of type "+c+".  ",n=0,r=0,i=g.length;i>r;r++)l=g[r],n+=l.attributionAncestry(!0).length-l.attributionAncestry(!1).length;return n>0&&(o+="There are "+n+" premise connections that will be broken if you hide that attribute.  "),o.length>0?tinymce.activeEditor.Dialogs.confirm({title:"Warning",message:""+o+"Continue anyway?",okCallback:t}):t()}})}}return s.push({text:"Attributes...",onclick:window.attributesActionForGroup(e)}),(a=e.lookupAttributes("code")).length>0&&(u=a[a.length-1],u instanceof Group&&(u=u.canonicalForm()),"st"===u.type&&s.push({text:"Edit as code...",onclick:function(){return e.plugin.editor.Dialogs.codeEditor({value:e.contentAsCode(),okCallback:function(t){return e.plugin.editor.undoManager.transact(function(){return e.setContentAsCode(t)})}})}})),s}}],t=function(t){var e,n;return n=function(e){return tinymce.activeEditor.undoManager.transact(function(){return t.set("key",e)})},e=function(t){return{text:t,onclick:function(){return n(t.toLowerCase())}}},{text:"Change attribute key to...",menu:[e("Label"),e("Reason"),e("Premise"),e("Code"),{text:"Other...",onclick:function(){return tinymce.activeEditor.Dialogs.prompt({title:"Enter new key",message:'Change "'+t.get("key")+'" to what?',okCallback:function(t){return/^[a-zA-Z0-9-_]+$/.test(t)?n(t):void tinymce.activeEditor.Dialogs.alert({title:"Invalid key",message:"Keys can only contain Roman letters, decimal digits, hyphens, and underscores (no spaces or other punctuation).",width:300,height:200})}})}}]}}}).call(this);
//# sourceMappingURL=main-app-groups-solo.min.js.map