(function(){var t=[].slice;window.groupTypes=[{name:"expression",text:"Expression",imageHTML:'<font color="#996666">[ ]</font>',openImageHTML:'<font color="#996666">[</font>',closeImageHTML:'<font color="#996666">]</font>',tooltip:"Make the selected text an expression",color:"#996666",shortcut:"Ctrl+[",LaTeXshortcut:"\\[",connectionRequest:function(t,e){var n;return n=function(t,e){var o,r,i,c,a;if(t===e)return!0;for(a=t.connectionsOut(),i=0,c=a.length;c>i;i++)if(o=a[i],r=tinymce.activeEditor.Groups[o[1]],n(r,e))return!0;return!1},n(e,t)?t.plugin.editor.Dialogs.alert({title:"Cannot connect expressions",message:"Forming that connection would create a cycle of connections among expressions, which is not permitted."}):tinymce.activeEditor.undoManager.transact(function(){return t.connect(e),t.get("key")||t.set("key","label"),t.get("keyposition")?void 0:t.set("keyposition","arrow")})},connections:function(e){var n,o,r,i,c,a,u,s;for(r=e.connectionsOut(),o=e.connectionsIn(),s=t.call(o).concat(t.call(r)),a=0,u=s.length;u>a;a++)n=s[a],i=tinymce.activeEditor.Groups[n[0]],"arrow"===i.get("keyposition")&&(n[2]=i.get("key")),"premise"===i.get("key")&&(n[3]=function(t){return t.setLineDash([3,3])});return t.call(r).concat(t.call(o),t.call(function(){var t,e,n;for(n=[],t=0,e=r.length;e>t;t++)c=r[t],n.push(c[1]);return n}()),t.call(function(){var t,e,n;for(n=[],t=0,e=o.length;e>t;t++)c=o[t],n.push(c[0]);return n}()))},tagContents:function(t){return"source"===t.get("keyposition")?t.get("key"):null},tagMenuItems:function(t){var e;return e=[],"source"===t.get("keyposition")&&e.push({text:'Move "'+t.get("key")+'" onto arrow',onclick:function(){return tinymce.activeEditor.undoManager.transact(function(){return t.set("keyposition","arrow")})}}),e},contextMenuItems:function(t){var e,n,o,r,i,c,a,u,s,l,g,h,f,y;if(c=[],"arrow"===t.get("keyposition")&&c.push({text:'Move "'+t.get("key")+'" onto attribute',onclick:function(){return tinymce.activeEditor.undoManager.transact(function(){return t.set("keyposition","source")})}}),c.push({text:"Change attribute key to...",menu:[{text:"Label",onclick:function(){return tinymce.activeEditor.undoManager.transact(function(){return t.set("key","label")})}},{text:"Reason",onclick:function(){return tinymce.activeEditor.undoManager.transact(function(){return t.set("key","reason")})}},{text:"Premise",onclick:function(){return tinymce.activeEditor.undoManager.transact(function(){return t.set("key","premise")})}},{text:"Other...",onclick:function(){var e;return e=prompt("Choose a new key:",t.get("key")),e?tinymce.activeEditor.undoManager.transact(function(){return t.set("key",e)}):void 0}}]}),r=t.connectionsOut(),i=t.get("key"),r.length>0&&"premise"!==i){for(l=function(){var t,e,n;for(n=[],t=0,e=r.length;e>t;t++)o=r[t],n.push(tinymce.activeEditor.Groups[o[1]]);return n}(),e=!0,g=0,f=l.length;f>g;g++)if(s=l[g],s.attributeGroupsForKey(i).length>1){e=!1;break}if(e)c.push({text:"Hide this attribute",onclick:function(){var e,n,o;return e=function(){return tinymce.activeEditor.undoManager.transact(function(){var e,n,o,r,c;for(c=[],e=o=0,r=l.length;r>o;e=++o)s=l[e],n=e===l.length-1,s.embedAttribute(i,n),c.push(n?void 0:t.connect(l[e+1]));return c})},o="",l.length>1&&(o+="You are hiding this attribute in "+l.length+" expressions.  "),n=t.attributionAncestry(!0).length-t.attributionAncestry(!1).length,n>0&&(o+="There are "+n+" premise connections that will be broken if you hide that attribute.  "),o.length>0?tinymce.activeEditor.Dialogs.confirm({title:"Warning",message:""+o+"Continue anyway?",okCallback:e}):e()}});else if(1===l.length){for(s=l[0],u=s.attributeGroupsForKey(i),n=!1,h=0,y=u.length;y>h;h++)if(a=u[h],a.connectionsOut().length>1){n=!0;break}n||c.push({text:"Hide this attribute",onclick:function(){var e,n,o,r,c;for(e=function(){return tinymce.activeEditor.undoManager.transact(function(){var e,n,o,r,c;for(c=[],e=o=0,r=l.length;r>o;e=++o)s=l[e],n=e===l.length-1,s.embedAttribute(i,n),c.push(n?void 0:t.connect(l[e+1]));return c})},o="You are about to hide not one attribute, but "+u.length+", all of type "+i+".  ",n=0,r=0,c=u.length;c>r;r++)a=u[r],n+=a.attributionAncestry(!0).length-a.attributionAncestry(!1).length;return n>0&&(o+="There are "+n+" premise connections that will be broken if you hide that attribute.  "),o.length>0?tinymce.activeEditor.Dialogs.confirm({title:"Warning",message:""+o+"Continue anyway?",okCallback:e}):e()}})}}return c.push({text:"Attributes...",onclick:window.attributesActionForGroup(t)}),c}}]}).call(this);
//# sourceMappingURL=main-app-groups-solo.min.js.map